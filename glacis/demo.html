<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data:; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; style-src 'self' https: 'unsafe-inline'; img-src 'self' https: data:; font-src 'self' https: data:; connect-src 'self' https:; frame-src 'self' https:; object-src 'none'; base-uri 'self'; form-action 'self' https:">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17749975789"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag("js", new Date());
        gtag("config", "AW-17749975789");
    </script>

    <title>GLACIS — Zero-Egress Demo</title>
    <meta name="description" content="Interactive demonstration of Zero-Egress Attestation. See how Glacis proves AI integrity without sensitive data leaving your environment.">
    <link rel="canonical" href="https://www.glacis.io/demo.html">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,500;0,9..144,600;0,9..144,700;1,9..144,400&family=Inter:wght@400;500;600;700&family=Outfit:wght@500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'glacis': {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        }
                    },
                    fontFamily: {
                        'display': ['Fraunces', 'Georgia', 'serif'],
                        'body': ['Inter', 'system-ui', 'sans-serif'],
                        'logo': ['Outfit', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s infinite cubic-bezier(0.4, 0, 0.6, 1)',
                    }
                }
            }
        }
    </script>

    <style>
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: #020617; /* Slate 950 */
            color: #f8fafc;
            -webkit-font-smoothing: antialiased;
        }
        .font-display { font-family: 'Fraunces', Georgia, serif; }

        /* --- Header/Nav Styles (Copied from index.html) --- */
        .site-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        /* Mobile menu fixes */
        .nav-links { display: flex; }
        @media (max-width: 1024px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0; right: 0;
                background: white;
                flex-direction: column;
                padding: 1rem;
                border-bottom: 1px solid #e5e7eb;
            }
            .nav-links.open { display: flex; }
        }

        /* --- Demo Specific Styles --- */
        
        /* Layout Grid */
        .demo-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        @media (min-width: 1024px) {
            .demo-grid {
                grid-template-columns: minmax(0, 5fr) 80px minmax(0, 5fr);
                gap: 1rem;
            }
        }

        /* Chat Bubbles */
        .chat-container {
            scrollbar-width: thin;
            scrollbar-color: #475569 #1e293b;
        }
        .chat-bubble {
            max-width: 85%;
            padding: 10px 14px;
            border-radius: 12px;
            margin-bottom: 12px;
            font-size: 0.9rem;
            line-height: 1.5;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0;
            transform: scale(0.95);
            position: relative;
        }
        .chat-bubble.user {
            background: #334155;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 2px;
            margin-left: auto;
        }
        .chat-bubble.ai {
            background: #0f766e;
            color: white;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
        }
        @keyframes popIn {
            to { opacity: 1; transform: scale(1); }
        }

        /* PHI Highlight */
        .phi-detected {
            background-color: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
            border-bottom: 1px dashed #fbbf24;
            padding: 0 2px;
            border-radius: 2px;
        }

        /* Hash Scramble Effect */
        .hash-scramble {
            font-family: 'JetBrains Mono', monospace;
            display: inline-block;
        }
        .scrambling {
            color: #818cf8;
            text-shadow: 0 0 5px rgba(99, 102, 241, 0.5);
        }

        /* Transmission Line */
        .transmission-line {
            position: relative;
            height: 4px;
            background: #334155;
            border-radius: 2px;
            overflow: hidden;
            width: 100%;
        }
        @media (min-width: 1024px) {
            .transmission-line { height: 4px; width: 100%; }
            .connector-vertical { display: none; }
        }
        @media (max-width: 1023px) {
            .transmission-line { width: 4px; height: 60px; margin: 0 auto; }
            .connector-horizontal { display: none; }
        }

        .packet {
            position: absolute;
            width: 40px;
            height: 100%;
            background: #6366f1;
            box-shadow: 0 0 10px #6366f1;
            border-radius: 4px;
            opacity: 0;
        }
        @media (max-width: 1023px) {
            .packet { width: 100%; height: 20px; }
        }

        .packet.sending {
            animation: transmit-horiz 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        @media (max-width: 1023px) {
            .packet.sending {
                animation: transmit-vert 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            }
        }

        @keyframes transmit-horiz {
            0% { left: 0; opacity: 0; width: 20px; }
            20% { opacity: 1; width: 60px; }
            80% { opacity: 1; width: 60px; }
            100% { left: 100%; opacity: 0; width: 20px; }
        }
        @keyframes transmit-vert {
            0% { top: 0; opacity: 0; height: 10px; }
            20% { opacity: 1; height: 30px; }
            80% { opacity: 1; height: 30px; }
            100% { top: 100%; opacity: 0; height: 10px; }
        }

        /* Receipt Style */
        .receipt-card {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.2);
            font-family: 'JetBrains Mono', monospace;
            position: relative;
            overflow: hidden;
        }
        .receipt-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 2px;
            background: linear-gradient(90deg, transparent, #6366f1, transparent);
        }
        .json-key { color: #94a3b8; }
        .json-string { color: #a5b4fc; }
        .json-number { color: #f472b6; }
        .json-highlight { color: #34d399; font-weight: bold; }
        
        .new-receipt {
            animation: receiptSlide 0.5s ease-out forwards;
        }
        @keyframes receiptSlide {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200">

    <!-- HEADER:START -->
    <header class="site-header">
        <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
            <a href="/" class="flex items-center gap-2.5 md:gap-3">
                <img src="glacis-logo.png" alt="GLACIS logo" width="48" height="48" class="w-11 h-11 md:w-[54px] md:h-[54px]">
                <img src="glacis-wordmark.svg" alt="GLACIS" height="45" class="h-9 md:h-[45px]">
            </a>
            <div class="hidden lg:flex items-center gap-5">
                 <a href="/" class="text-slate-600 hover:text-slate-900 font-medium">Back to Home</a>
                 <a href="/assessment" class="bg-indigo-600 text-white px-5 py-2 rounded-full font-semibold hover:bg-indigo-700 transition-colors">Get AI Score</a>
            </div>
        </div>
    </header>
    <!-- HEADER:END -->

    <main class="min-h-screen">
        <!-- Hero Section -->
        <section class="pt-16 pb-12 text-center px-4">
            <h1 class="font-display text-4xl md:text-5xl font-bold text-white mb-4">
                See Zero-Egress in <span class="text-indigo-400">Action</span>
            </h1>
            <p class="text-slate-400 max-w-2xl mx-auto text-lg">
                Type a message below. Watch how Glacis creates a cryptographic proof of your AI's behavior
                <span class="text-emerald-400 font-medium">without sensitive data ever leaving your browser</span>.
            </p>
        </section>

        <!-- Demo Stage -->
        <section class="max-w-7xl mx-auto px-4 pb-24">
            <div class="demo-grid items-stretch">
                
                <!-- LEFT COLUMN: Customer Environment -->
                <div class="bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl flex flex-col overflow-hidden relative group">
                    <!-- Status Bar -->
                    <div class="bg-slate-800 px-4 py-2 border-b border-slate-700 flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-emerald-500 animate-pulse"></div>
                            <span class="text-xs font-mono text-emerald-400 uppercase tracking-wider">Your Environment (Secure)</span>
                        </div>
                        <div class="text-xs text-slate-500">Local Sidecar Active</div>
                    </div>

                    <div class="p-6 flex-grow flex flex-col gap-6">
                        <!-- Chat Interface -->
                        <div class="flex-grow flex flex-col">
                            <div id="chat-history" class="chat-container bg-slate-950/50 rounded-xl p-4 h-64 overflow-y-auto mb-4 border border-slate-800/50">
                                <div class="chat-bubble ai">
                                    Hello. I am your AI assistant. I can help process patient notes.
                                    <br><span class="text-xs opacity-70 mt-1 block">System: Glacis Witness Active</span>
                                </div>
                            </div>
                            
                            <!-- Inputs -->
                            <div class="relative">
                                <textarea id="chat-input" class="w-full bg-slate-800 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all outline-none resize-none h-24 font-sans" placeholder="Type a message (e.g. 'Patient John Doe, SSN 123-45-6789...')..."></textarea>
                                <div id="phi-warning" class="absolute bottom-3 right-3 text-xs text-amber-500 hidden items-center gap-1 bg-slate-900/90 px-2 py-1 rounded">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                                    PHI Detected
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="flex gap-2 mt-3 overflow-x-auto pb-1">
                                <button onclick="demo.quickFill('pii')" class="text-xs bg-slate-800 hover:bg-slate-700 text-indigo-300 px-3 py-1.5 rounded-full border border-slate-700 transition-colors whitespace-nowrap">Insert PII</button>
                                <button onclick="demo.quickFill('phi')" class="text-xs bg-slate-800 hover:bg-slate-700 text-amber-300 px-3 py-1.5 rounded-full border border-slate-700 transition-colors whitespace-nowrap">Insert PHI (SSN)</button>
                                <button onclick="demo.sendMessage()" class="ml-auto bg-indigo-600 hover:bg-indigo-500 text-white px-5 py-1.5 rounded-full text-sm font-semibold transition-colors shadow-lg shadow-indigo-900/20">Send</button>
                            </div>
                        </div>

                        <!-- Local Hashing Visualization -->
                        <div class="bg-slate-950 rounded-xl border border-dashed border-slate-700 p-4 relative">
                            <div class="absolute -top-3 left-3 bg-slate-900 px-2 text-xs text-slate-500 font-mono">LOCAL_PROCESS: HASHER</div>
                            
                            <div class="flex flex-col gap-2">
                                <div class="flex justify-between items-center text-xs text-slate-400">
                                    <span>Payload Status:</span>
                                    <span class="text-emerald-400 flex items-center gap-1"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg> LOCKED</span>
                                </div>
                                <div class="font-mono text-xs break-all h-10 flex items-center text-slate-500" id="hash-display">
                                    [Waiting for input...]
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MIDDLE COLUMN: Network Connector -->
                <div class="flex lg:flex-col items-center justify-center relative py-4 lg:py-0">
                    <div class="text-[10px] text-slate-500 uppercase tracking-widest font-mono mb-2 lg:mb-4 w-full text-center">TLS 1.3 Tunnel</div>
                    
                    <!-- The Line -->
                    <div class="transmission-line bg-slate-800 rounded-full relative">
                        <div id="packet" class="packet"></div>
                    </div>

                    <div class="text-[10px] text-indigo-400 mt-2 lg:mt-4 font-mono w-full text-center flex items-center justify-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                        HASH ONLY
                    </div>
                </div>

                <!-- RIGHT COLUMN: Glacis Witness -->
                <div class="bg-slate-900/80 rounded-2xl border border-indigo-500/30 shadow-[0_0_50px_rgba(79,70,229,0.1)] flex flex-col relative overflow-hidden backdrop-blur-sm">
                    <div class="absolute inset-0 bg-indigo-500/5 pointer-events-none"></div>
                    
                    <!-- Header -->
                    <div class="bg-slate-900/90 px-4 py-2 border-b border-indigo-500/20 flex items-center justify-between z-10">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-indigo-500 shadow-[0_0_10px_#6366f1]"></div>
                            <span class="text-xs font-mono text-indigo-300 uppercase tracking-wider">Glacis Witness Network</span>
                        </div>
                        <div class="text-xs text-indigo-400/50">Node: us-west-2</div>
                    </div>

                    <div class="p-6 flex-grow flex flex-col z-10">
                        <!-- Terminal Output -->
                        <div class="flex-grow font-mono text-xs overflow-y-auto" id="receipt-feed">
                            <div class="text-slate-500 mb-4">// Waiting for incoming proofs...</div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </main>

    <!-- FOOTER:START -->
    <footer class="bg-slate-950 text-slate-400 py-12 px-6 border-t border-slate-900">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-sm">© 2026 Glacis Technologies, Inc. | <a href="/" class="hover:text-white">Back to Homepage</a></p>
        </div>
    </footer>
    <!-- FOOTER:END -->

    <!-- Demo Logic -->
    <script>
        class GlacisDemo {
            constructor() {
                this.chatHistory = document.getElementById('chat-history');
                this.input = document.getElementById('chat-input');
                this.hashDisplay = document.getElementById('hash-display');
                this.packet = document.getElementById('packet');
                this.receiptFeed = document.getElementById('receipt-feed');
                this.phiWarning = document.getElementById('phi-warning');

                // Regex Patterns
                this.patterns = {
                    ssn: /\b\d{3}[-]?\d{2}[-]?\d{4}\b/g,
                    phone: /\b(\+\d{1,2}\s?)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}\b/g,
                    email: /\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b/g
                };

                this.input.addEventListener('input', () => this.checkInput());
                
                // Allow Enter to send
                this.input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
            }

            checkInput() {
                const text = this.input.value;
                let hasPhi = false;
                
                // Simple check for demo purposes
                if (this.patterns.ssn.test(text) ||
                    this.patterns.phone.test(text) ||
                    this.patterns.email.test(text)) {
                    hasPhi = true;
                }

                if (hasPhi) {
                    this.phiWarning.classList.remove('hidden');
                    this.phiWarning.classList.add('flex');
                    this.input.classList.add('border-amber-500/50', 'bg-amber-900/10');
                    this.input.classList.remove('border-slate-700');
                } else {
                    this.phiWarning.classList.add('hidden');
                    this.phiWarning.classList.remove('flex');
                    this.input.classList.remove('border-amber-500/50', 'bg-amber-900/10');
                    this.input.classList.add('border-slate-700');
                }
            }

            quickFill(type) {
                if (type === 'phi') {
                    this.input.value = "Patient ID: 49201. SSN is 123-45-6789. Can we process the claim?";
                } else {
                    this.input.value = "Please email the report to doctor@hospital.org by Friday.";
                }
                this.checkInput();
                this.input.focus();
            }

            async sha256(message) {
                const msgBuffer = new TextEncoder().encode(message);
                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            }

            async sendMessage() {
                const text = this.input.value.trim();
                if (!text) return;

                // 1. Add User Message
                this.addBubble(text, 'user');
                this.input.value = '';
                this.checkInput();
                this.input.disabled = true;

                // 2. Animate Local Hashing
                this.hashDisplay.innerHTML = '<span class="scrambling">CALCULATING SHA-256...</span>';
                this.hashDisplay.classList.add('text-indigo-400');
                
                // Real Hash
                const hash = await this.sha256(text);
                
                // Scramble Effect delay
                setTimeout(() => {
                    this.hashDisplay.innerHTML = `<span class="text-indigo-300">${hash.substring(0, 24)}...</span>`;
                    
                    // 3. Transmit
                    this.packet.classList.add('sending');
                    
                    // 4. Receipt arrival
                    setTimeout(() => {
                        this.packet.classList.remove('sending');
                        this.generateReceipt(hash);
                        this.input.disabled = false;
                        this.input.focus();
                        
                        // 5. AI Reply (Simulation)
                        setTimeout(() => {
                            this.addBubble("Message received. Receipt logged to immutable ledger.", 'ai');
                            this.hashDisplay.innerHTML = '[Waiting for input...]';
                            this.hashDisplay.classList.remove('text-indigo-400');
                        }, 800);

                    }, 1500); // Transmission time

                }, 600); // Hashing time
            }

            addBubble(text, type) {
                const bubble = document.createElement('div');
                bubble.className = `chat-bubble ${type} flex flex-col`;
                
                // Highlight PHI in the bubble for visual effect
                let html = text
                    .replace(/</g, "<")
                    .replace(/>/g, ">")
                    .replace(this.patterns.ssn, match => `<span class="phi-detected">${match}</span>`)
                    .replace(this.patterns.phone, match => `<span class="phi-detected">${match}</span>`)
                    .replace(this.patterns.email, match => `<span class="phi-detected">${match}</span>`);

                bubble.innerHTML = html;
                
                if (type === 'ai') {
                    bubble.innerHTML += `<span class="text-[10px] opacity-60 mt-2 pt-2 border-t border-white/10 font-mono">Verified by Glacis</span>`;
                }

                this.chatHistory.appendChild(bubble);
                this.chatHistory.scrollTop = this.chatHistory.scrollHeight;
            }

            generateReceipt(payloadHash) {
                const id = crypto.randomUUID().split('-')[0];
                const timestamp = new Date().toISOString();
                const merkle = "0x" + Math.random().toString(16).substr(2, 16) + "...";
                
                const receiptHtml = `
                <div class="receipt-card mb-4 p-3 rounded text-[10px] new-receipt border-l-2 border-emerald-500">
                    <div class="flex justify-between mb-1">
                        <span class="text-emerald-400 font-bold">✓ PROOF #${id}</span>
                        <span class="text-slate-500">${new Date().toLocaleTimeString()}</span>
                    </div>
                    <div><span class="json-key">"timestamp":</span> <span class="json-string">"${timestamp}"</span></div>
                    <div><span class="json-key">"payload_hash":</span> <span class="json-string">"${payloadHash.substring(0, 16)}..."</span></div>
                    <div><span class="json-key">"merkle_root":</span> <span class="json-string">"${merkle}"</span></div>
                    <div class="mt-2 text-slate-500 border-t border-slate-800 pt-1 flex justify-between">
                        <span>SIG: VALID (ECDSA)</span>
                        <a href="#" class="text-indigo-400 hover:text-indigo-300">View Log →</a>
                    </div>
                </div>`;
                
                // Insert at top
                const wrapper = document.createElement('div');
                wrapper.innerHTML = receiptHtml;
                this.receiptFeed.insertBefore(wrapper.firstElementChild, this.receiptFeed.firstChild);
            }
        }

        // Initialize
        const demo = new GlacisDemo();
    </script>
</body>
</html>