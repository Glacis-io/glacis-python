# GLACIS Configuration — PraxisPro QA Pipeline
# Used by the judges demo for QA generation and review

version: "1.3"

# Policy metadata (included in attestations)
policy:
  id: "praxispro-qa-review"
  environment: "demo"
  tags: ["healthcare", "hipaa", "qa-pipeline"]

# Controls configuration (staged: input/output)
controls:
  output_block_action: "block"        # "block" = raise error, "forward" = return + mark blocked

  input:
    # PII/PHI Detection
    pii_phi:
      enabled: false
      model: "presidio"
      mode: "fast"
      entities: []
      if_detected: "flag"

    # Word Filter
    word_filter:
      enabled: true
      entities: ["confidential", "restricted", "do not distribute"]
      if_detected: "flag"

    # Jailbreak/Prompt Injection Detection
    jailbreak:
      enabled: false
      model: "prompt_guard_22m"
      threshold: 0.5
      if_detected: "block"

  output:
    # PII/PHI Detection on LLM responses
    pii_phi:
      enabled: false
      model: "presidio"
      mode: "fast"
      entities: []
      if_detected: "flag"

    # Word Filter on LLM responses — catch leaked terms
    word_filter:
      enabled: true
      entities: ["confidential", "restricted", "do not distribute"]
      if_detected: "flag"

    # Jailbreak Detection on LLM responses
    jailbreak:
      enabled: false
      model: "prompt_guard_22m"
      threshold: 0.5
      if_detected: "flag"

# Sampling configuration
sampling:
  l1_rate: 1.0                        # L1 evidence collection / judge review (0.0-1.0)
  l2_rate: 0.0                        # L2 deep inspection (0.0-1.0, implies L1)

# Judge pipeline settings
judges:
  max_score: 3.0
  uphold_threshold: 2.0
  borderline_threshold: 1.0
  consensus_threshold: 1.0
  score_precision: 4

# Attestation settings
attestation:
  offline: true
  service_id: "praxispro-qa-gen"

# Evidence storage backend configuration
evidence_storage:
  backend: "json"                     # "sqlite" (default) or "json" (JSONL append-only)
  path: "./demo_evidence"
